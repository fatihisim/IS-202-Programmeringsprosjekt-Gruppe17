version: "3.9"

services:
  # 游游 Denne tjenesten kj칮rer MariaDB-databasen.
  mariadb:
    image: mariadb:latest                   # Bruker den nyeste MariaDB-versjonen
    container_name: is202nrlapp-mariadb-1   # Navn p친 containeren
    restart: always                         # Starter automatisk hvis den stopper
    environment:
      MYSQL_ROOT_PASSWORD: example           # Rotpassord for databasen
      MYSQL_DATABASE: nrlappdb               # Navn p친 databasen
      MYSQL_USER: root                       # Brukernavn
      MYSQL_PASSWORD: example                # Passord
    ports:
      - "3307:3306"                          # Eksponerer port 3306 p친 port 3307 lokalt
    volumes:
      - mariadb_data:/var/lib/mysql          # Lagrer databasefiler permanent

  # 游游 Denne tjenesten kj칮rer ASP.NET Core web-applikasjonen.
  web:
    build: .                                 # Bygger fra Dockerfile i prosjektmappen
    container_name: is202nrlapp-web-1        # Navn p친 web-containeren
    depends_on:
      - mariadb                              # Starter f칮rst MariaDB
    environment:
      - ASPNETCORE_ENVIRONMENT=Development   # Kj칮rer i utviklingsmodus
      - ConnectionStrings__DefaultConnection=server=mariadb;database=nrlappdb;user=root;password=example;
    ports:
      - "8080:8080"                          # Gj칮r applikasjonen tilgjengelig p친 http://localhost:8080

# 游游 Volumet som brukes for 친 lagre databasefiler
volumes:
  mariadb_data:
